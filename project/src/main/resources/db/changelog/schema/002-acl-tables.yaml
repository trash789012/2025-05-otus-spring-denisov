databaseChangeLog:
  - changeSet:
      id: 002-acl-tables
      author: denisovNA
      comment: Создание таблиц ACL
#      changes:
#
#        # TABLE acl_sid
#        - createTable:
#            tableName: acl_sid
#            columns:
#              - column:
#                  name: id
#                  type: BIGINT
#                  autoIncrement: true
#                  constraints:
#                    primaryKey: true
#                    nullable: false
#              - column:
#                  name: principal
#                  type: BOOLEAN
#                  constraints:
#                    nullable: false
#              - column:
#                  name: sid
#                  type: VARCHAR(100)
#                  constraints:
#                    nullable: false
#
#        # TABLE acl_class
#        - createTable:
#            tableName: acl_class
#            columns:
#              - column:
#                  name: id
#                  type: BIGINT
#                  autoIncrement: true
#                  constraints:
#                    primaryKey: true
#                    nullable: false
#              - column:
#                  name: class
#                  type: VARCHAR(100)
#                  constraints:
#                    nullable: false
#
#        # TABLE acl_object_identity
#        - createTable:
#            tableName: acl_object_identity
#            columns:
#              - column:
#                  name: id
#                  type: BIGINT
#                  autoIncrement: true
#                  constraints:
#                    primaryKey: true
#                    nullable: false
#              - column:
#                  name: object_id_class
#                  type: BIGINT
#                  constraints:
#                    nullable: false
#                    foreignKeyName: fk_acl_obj_class
#                    references: acl_class(id)
#              - column:
#                  name: object_id_identity
#                  type: BIGINT
#                  constraints:
#                    nullable: false
#              - column:
#                  name: parent_object
#                  type: BIGINT
#                  constraints:
#                    nullable: true
#                    foreignKeyName: fk_acl_obj_parent
#                    references: acl_object_identity(id)
#              - column:
#                  name: owner_sid
#                  type: BIGINT
#                  constraints:
#                    nullable: true
#                    foreignKeyName: fk_acl_obj_owner
#                    references: acl_sid(id)
#              - column:
#                  name: entries_inheriting
#                  type: BOOLEAN
#                  constraints:
#                    nullable: false
#
#        # TABLE acl_entry
#        - createTable:
#            tableName: acl_entry
#            columns:
#              - column:
#                  name: id
#                  type: BIGINT
#                  autoIncrement: true
#                  constraints:
#                    primaryKey: true
#                    nullable: false
#              - column:
#                  name: acl_object_identity
#                  type: BIGINT
#                  constraints:
#                    nullable: false
#                    foreignKeyName: fk_acl_entry_object
#                    references: acl_object_identity(id)
#              - column:
#                  name: ace_order
#                  type: INT
#                  constraints:
#                    nullable: false
#              - column:
#                  name: sid
#                  type: BIGINT
#                  constraints:
#                    nullable: false
#                    foreignKeyName: fk_acl_entry_sid
#                    references: acl_sid(id)
#              - column:
#                  name: mask
#                  type: INT
#                  constraints:
#                    nullable: false
#              - column:
#                  name: granting
#                  type: BOOLEAN
#                  constraints:
#                    nullable: false
#              - column:
#                  name: audit_success
#                  type: BOOLEAN
#                  constraints:
#                    nullable: false
#              - column:
#                  name: audit_failure
#                  type: BOOLEAN
#                  constraints:
#                    nullable: false
#
#        # ---- UNIQUE CONSTRAINTS ----
#        - addUniqueConstraint:
#            tableName: acl_sid
#            columnNames: sid, principal
#            constraintName: uk_acl_sid
#
#        - addUniqueConstraint:
#            tableName: acl_class
#            columnNames: class
#            constraintName: uk_acl_class
#
#        - addUniqueConstraint:
#            tableName: acl_object_identity
#            columnNames: object_id_class, object_id_identity
#            constraintName: uk_acl_object_identity
#
#        - addUniqueConstraint:
#            tableName: acl_entry
#            columnNames: acl_object_identity, ace_order
#            constraintName: uk_acl_entry
#
#        # ---- INDEXES ----
#        - createIndex:
#            tableName: acl_sid
#            indexName: idx_acl_sid_sid
#            columns:
#              - column:
#                  name: sid
#
#        - createIndex:
#            tableName: acl_object_identity
#            indexName: idx_acl_obj_class
#            columns:
#              - column:
#                  name: object_id_class
#
#        - createIndex:
#            tableName: acl_object_identity
#            indexName: idx_acl_obj_parent
#            columns:
#              - column:
#                  name: parent_object
#
#        - createIndex:
#            tableName: acl_object_identity
#            indexName: idx_acl_obj_owner
#            columns:
#              - column:
#                  name: owner_sid
#
#        - createIndex:
#            tableName: acl_entry
#            indexName: idx_acl_entry_object
#            columns:
#              - column:
#                  name: acl_object_identity
#
#        - createIndex:
#            tableName: acl_entry
#            indexName: idx_acl_entry_sid
#            columns:
#              - column:
#                  name: sid
